<div>
  <%= link_to "Add new technique", new_admin_technique_path, class: "btn btn-default right" %>

  <%= form_tag admin_techniques_path, method: :get do %>
    <%= search_field_tag :query, params[:query], class: "right" %>
    <%= button_tag "Search" %>
  <% end %>

  <h1>Technique register</h1>
</div>

<% @belts.each do |belt| %>
  <% next if belt.techniques.where(id: @matching_techniques).empty? %>

  <div class="technique-list">
    <h2>
      <%= belt.color.titleize %>
      (<%= belt.degree %>)
      <span class="right"><i class="fa fa-chevron-up" aria-hidden="true"></i></span>
    </h2>

    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Topic</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% belt.techniques.where(id: @matching_techniques).order(:topic, :name).each do |technique| %>
            <tr>
              <td><%= link_to technique.name.titleize, [technique.belt, technique] %></td>
              <td><%= technique.description.titleize %></td>
              <td><%= technique.topic.titleize %></td>
              <td>
                <%= link_to "Edit", edit_admin_technique_path(technique), class: "btn btn-xs btn-info" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

  </div>
<% end %>
